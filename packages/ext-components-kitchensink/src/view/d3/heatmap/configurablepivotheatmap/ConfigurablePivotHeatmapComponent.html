<ext-container
  padding="10"
  layout="fit"
  height="100%"
>
    <ext-pivotd3container
      height="100%"
      onready="configurablepivotheatmap.mainPivotReady(event)"
      configurator='{
        "fields": [{
          "dataIndex":  "quantity",
          "header":     "Qty",
          "aggregator": "sum",
          "formatter": "number(\"0\")",

          "settings": {
            "allowed": ["aggregate"],
            "style": {
              "fontWeight": "bold"
            },
            "formatters": {
              "0": "number(\"0\")",
              "0%": "number(\"0%\")"
            }
          }
        }, {
            "dataIndex": "value",
            "header": "Value",

            "settings": {
              "allowed": "aggregate",
              "aggregators": ["sum", "avg", "count"],
              "style": {
                "fontWeight": "bold"
              },
              "formatters": {
                "0": "number(\"0\")",
                "0.00": "number(\"0.00\")",
                "0,000.00": "number(\"0,000.00\")",
                "0%": "number(\"0%\")",
                "0.00%": "number(\"0.00%\")"
              }
            }
        }, {
          "dataIndex": "company",
          "header": "Company",

          "settings": {
            "aggregators": ["count"]
          }
        }, {
          "dataIndex": "country",
          "header": "Country",

          "settings": {
            "aggregators": ["count"]
          }
        }, {
          "dataIndex": "person",
          "header": "Person",

          "settings": {
            "aggregators": "count"
          }
        }, {
          "dataIndex": "year",
          "header": "Year",

          "settings": {
            "allowed": ["leftAxis", "topAxis"]
          }
        }, {
          "dataIndex": "month",
          "header": "Month",
          "labelRenderer": "monthLabelRenderer",

          "settings": {
            "allowed": ["leftAxis", "topAxis"]
          }
        }]
      }'

      matrix='{
        "type": "local",
        "aggregate": [{
            "dataIndex": "value",
            "header": "Value",
            "aggregator": "avg",
            "width": "120"
        }],
        "leftAxis": [{
            "dataIndex": "person",
            "header": "Person",
            "width": "120"
        }, {
            "dataIndex": "company",
            "header": "Company",
            "sortable": false
        }],
        "topAxis": [{
            "dataIndex": "year",
            "header": "Year"
        }]
      }'
    >
    </ext-pivotd3container>
</ext-container>
